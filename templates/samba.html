{% extends "base.html" %}
{% set header = "Compartición Samba" %}
{% set subheader = "Activación rápida de recursos (smb.conf)" %}

{% block topbar_actions %}
  <button class="btn btn-outline-secondary btn-sm" onclick="restartSamba()">
    <i class="bi bi-arrow-clockwise me-1"></i> Reiniciar smbd
  </button>
{% endblock %}

{% block content %}
<section class="surface">
  <div class="surface-head">
    <div>
      <div class="surface-title"><i class="bi bi-share me-2 text-primary"></i>Recursos compartidos</div>
      <div class="surface-subtitle">Activa o desactiva recursos sin editar el archivo a mano.</div>
    </div>
  </div>

  <div class="share-grid">
    {% for s in shares %}
    <div class="share-card">
      <div class="me-3">
        <i class="bi bi-folder-symlink-fill fs-2 text-secondary"></i>
      </div>
      <div class="share-main min-w-0">
        <div class="share-name text-truncate d-flex align-items-center gap-2">
          [{{ s.name }}]
        </div>
        <div class="share-path text-truncate"><code>{{ s.path or '-' }}</code></div>
        <div class="share-tags">
          {% if s.public %}
            <span class="badge text-bg-info rounded-pill"><i class="bi bi-globe me-1"></i>Público</span>
          {% else %}
            <span class="badge text-bg-secondary rounded-pill"><i class="bi bi-lock me-1"></i>Restringido</span>
          {% endif %}
          {% if s.read_only %}
            <span class="badge text-bg-light text-dark rounded-pill border border-secondary"><i class="bi bi-eye me-1"></i>Solo lectura</span>
          {% else %}
            <span class="badge text-bg-success rounded-pill"><i class="bi bi-pencil me-1"></i>Escritura</span>
          {% endif %}
        </div>
      </div>

      <div class="share-toggle">
        <div class="form-check form-switch m-0">
          <input class="form-check-input" type="checkbox" {{ 'checked' if s.enabled else '' }}
                 data-share="{{ s.name }}"
                 onchange="toggleSambaShareFromEl(this)"
                 style="width: 3em; height: 1.5em;">
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
